<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Prototype</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="lib/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="lib/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="src/style.css" rel="stylesheet">
  </head>

  <body data-spy="scroll" data-target=".subnav" data-offset="50">
    <div class="container">

  <header class="jumbotron masthead">

  </header>

  <div id="tag-info" class="hero-unit">
    <h1>Showing <span id="tag-name"></span> photos</h1>
    <button id="show-all" class="btn btn-large btn-primary">Show All</button>
  </div>

  <div class="photos-container">
    <div id="photos" class="photos">
    </div>
    <div class="clearfix"></div>
    <div class="buttons">
      <button id="previous" class="btn"> << Previous</button>
      <button id="next" class="btn">Next >> </button>
    </div>
  </div>

  <!-- <div class="photos-container">
    <div id="other-photos" class="photos">
    </div>
    <div class="clearfix"></div>
    <div class="buttons">
      <button id="other-previous" class="btn"><< Previous</button>
      <button id="other-next" class="btn">Next >></button>
    </div>
  </div> -->

  </div>
    <script type="text/javascript" src="lib/jquery/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="lib/underscore/underscore.js"></script>
    <script type="text/javascript" src="src/photo_collection.js"></script>
    <script id="content-template" type="example/template">
        <div class="photo">
          <figure>
            <img src="{{url}}" alt="{{title}}" />
            <figcaption>{{caption}}</figcaption>
          </figure>
          <p>Tags: {{tags}}</p>
        </div>
      </script>
    <script type="text/javascript" src="src/renderer.js"></script>
    <script type="text/javascript" src="src/v3/paginator.js"></script>

    <script type="text/javascript">
      var paginator = new Paginator({
        element: $('div#photos'),
        items: photos,
        next: $('#next'),
        previous: $('#previous'),
        renderer: renderer,
        pageSize: 3
      });
      paginator.showPage(1);

      $('.tag').live('click', function(){
        var selectedTag = this.dataset.tag;

        var photosContainingTag = $.grep(photos, function(photo){
          return photo.tags.indexOf(selectedTag) >= 0;
        });

        paginator.reload(photosContainingTag);

        $('#tag-name').html(selectedTag);
        $('#tag-info').show();

      });

      $('#show-all').on('click', function(){
        paginator.reload(photos);
        $('#tag-info').hide();
      });

      // var otherPaginator = new Paginator({
      //   element: $('div#other-photos'),
      //   items: photos,
      //   next: $('#other-next'),
      //   previous: $('#other-previous'),
      //   renderer: renderer,
      //   pageSize: 2
      // });
      // otherPaginator.showPage(1);

    </script>
  </body>
</html>